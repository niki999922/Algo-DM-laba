package ru.ifmo

import ru.ifmo.parser.expression.ParserMathExpression
fun main() {
    val parser = ParserMathExpression()
    var flag = true
    var thread = Thread {
        val start = System.currentTimeMillis()
        while (flag) {
            Thread.currentThread().join(5)
            var time = System.currentTimeMillis() - start
            print("\r${time / 1000}.${time % 1000} seconds...")
        }
    }
    try {
        thread.start()
        // 3.3 sec
        val res = parser.parse(
            "(123*123-12312312)+(((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))+((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))))<<((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))+((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))))*(7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))+((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))))>>((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))+((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))))<<((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))+((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))))*(7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))+((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34))))*((((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))+((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))))<<((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))+((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))))*(7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))+((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))))>>((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))+((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))))<<((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))+((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))))*(7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))+((7<<8*6-13)<<1+4<<((3>>4*5<<(-1))+((2>>34)))))"
        )
        Painter.draw(res, "Tree")
    } catch (e: Exception) {
        println(e.message)
        return
    } finally {
        flag = false
        thread.join()
    }
}

